#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¯»å–æäº¤ä¿¡æ¯
commit_msg=$(cat $1)

# æ£€æŸ¥æäº¤ä¿¡æ¯æ ¼å¼ (type(scope): description)
commit_regex='^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .{1,100}'

if ! echo "$commit_msg" | grep -qE "$commit_regex"; then
  echo ""
  echo "ğŸš« æäº¤ä¿¡æ¯æ ¼å¼ä¸æ­£ç¡®ï¼"
  echo ""
  echo "æ­£ç¡®æ ¼å¼: type(scope): description"
  echo ""
  echo "ç¤ºä¾‹:"
  echo "  feat: æ·»åŠ æ–°åŠŸèƒ½"
  echo "  fix(auth): ä¿®å¤ç™»å½•é—®é¢˜"
  echo "  docs: æ›´æ–°READMEæ–‡æ¡£"
  echo ""
  echo "å…è®¸çš„ç±»å‹: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
  echo ""
  echo "è¯·ä½¿ç”¨ 'pnpm commit' æˆ– 'git cz' æ¥ç”Ÿæˆè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚"
  echo ""
  exit 1
fi

echo "âœ… æäº¤ä¿¡æ¯æ ¼å¼æ­£ç¡®"